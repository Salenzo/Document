\chapter{对象和类}
\newpage

\section{访问控制}

\begin{table}[!htbp]
    \centering
    \begin{tabular}{lccc}
        \toprule
                   & private(default)        & protected & public \\
        \midrule
        私有派生   & \multirow{3}*{不可访问} & 私有      & 私有   \\
        受保护派生 &                         & 受保护    & 受保护 \\
        公有派生   &                         & 受保护    & 公有   \\
        \bottomrule
    \end{tabular}
\end{table}

\section{构造函数}

\subsection{基本特征}

构造函数是与类名相同的成员函数。

\begin{enumerate}
    \item 返回类型为void
    \item 可以重载，但必须有不同的函数署名
    \item 默认不带任何参数
    \item 创建对象时会隐式调用
    \item 用来初始化数据成员
    \item 默认构造函数定义在类内
    \item 带参构造函数定义在类外
\end{enumerate}

\subsection{拷贝构造函数}

如果不提供，编译器会自动生成：将源对象所有数据成员的值逐一赋值给目标对象相应的数据成员

\begin{lstlisting}[frame=shadowbox]
    Person(Person&);
    Person(const Person&);
\end{lstlisting}

\subsection{转型构造函数}

关闭因转型构造函数导致的隐式类型转换，将运行期错误变成了编译器错误

\begin{lstlisting}[frame=shadowbox]
    explicit Person(const string& n) {name = n;}    
\end{lstlisting}

\subsection{构造函数初始化}

\begin{lstlisting}[frame=shadowbox]
    class C {
        public:
            C() {
                x = 0;
                c = 0; //ERROR(CONST)
            }
        private:
            int x;
            const int c;
    }    
\end{lstlisting}

对const类型初始化，只需要添加一个\textbf{初始化列表}：

\begin{lstlisting}[frame=shadowbox]
    class C {
        public:
            C() : c(0) {x = 0;}
        private:
            int x;
            const int c;
    }    
\end{lstlisting}

\textbf{初始化段}由冒号:开始，c为需要初始化的数据成员，()内是初始值，这是初始化const的\textbf{唯一方法}。
\textbf{初始化列表}仅在\textbf{构造函数}中有效。
数据成员的顺序仅取决于类中的顺序，与初始化段中的顺序无关。


\newpage

\subsection{new}

\begin{lstlisting}[frame=shadowbox]

    new constructor[([arguments])]

\end{lstlisting}

\section{析构函数}

析构函数当对象被\textbf{销毁}时，自动调用

\begin{lstlisting}[frame=shadowbox]
    class C {
        public:
            C() {}
            ~C() {}
        private:
            int x;
\end{lstlisting}

没有\textbf{参数}和\textbf{返回值}，不能重载

\section{指向对象的指针}



\subsection{常量指针 this}

\section{类作用域}

\newpage